<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lista Ordenada</title>

  <!-- jsPDF + SheetJS (para salvar/imprimir/copiar como no "mac") -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <style>
    :root{
      --azul:#007BFF;
      --azul-escuro:#0056b3;
      --sombra:0 6px 18px rgba(0,0,0,.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      background:#f0f2f5;
      color:#111;
    }

    /* ======== HEADER no estilo do mac (sem setinha ao lado do t√≠tulo) ======== */
    header{
      position:sticky; top:0; z-index:1000;
      display:flex; align-items:center; gap:10px;
      background:var(--azul); color:#fff; padding:8px 12px;
    }
    .menu-left,.menu-right{display:flex; align-items:center; gap:6px}
    .title-wrap{flex:1; text-align:center}
    .title-wrap h1{margin:0; font-size:16px; font-weight:700}
    .title-wrap small{display:block; opacity:.9}
    .icon-btn{
      background:none; border:none; color:#fff; cursor:pointer;
      font-size:18px; padding:6px 8px; border-radius:6px;
    }
    .icon-btn:hover{background:rgba(255,255,255,.12)}

    /* dropdown salvar */
    .dropdown{ position:relative }
    .dropdown-menu{
      display:none; position:absolute; right:0; top:calc(100% + 6px);
      background:#fff; color:#111; border-radius:8px; box-shadow:var(--sombra);
      min-width:220px; overflow:hidden; padding:6px 0; z-index:1200;
    }
    .dropdown-menu a{ display:block; padding:9px 12px; text-decoration:none; color:#111 }
    .dropdown-menu a:hover{ background:#f2f2f2 }

    /* ======== DRAWER lateral (tr√™s barrinhas) ======== */
    .overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; z-index:900 }
    .drawer{
      position:fixed; left:0; top:0; bottom:0; width:300px; background:#fff; box-shadow:var(--sombra);
      transform:translateX(-100%); transition:transform .22s ease-out; z-index:1001; overflow:auto;
    }
    .drawer.open{ transform:translateX(0) }
    .overlay.show{ display:block }

    .drawer header{ position:sticky; top:0; background:#fff; color:#111; padding:12px 14px; box-shadow:0 1px 0 #eee; z-index:2 }
    .drawer h2{ margin:0; font-size:16px }

    .drawer .section{ border-top:1px solid #eee }
    .drawer .section:first-of-type{ border-top:none }
    .section-header{ display:flex; align-items:center; justify-content:space-between; padding:10px 14px; cursor:pointer; user-select:none; font-weight:700 }
    .section-header small{ color:#666; font-weight:400 }
    .chev{ font-size:14px; color:#666 }
    .submenu{ display:none; padding:4px 0 }
    .submenu a{ display:block; padding:9px 18px; text-decoration:none; color:#111 }
    .submenu a:hover{ background:#f7f7f7 }

    /* ======== CONTE√öDO ======== */
    .container{ display:flex; justify-content:center; padding:20px }
    .content{ display:flex; gap:20px; max-width:1000px; width:100% }
    .col{ flex:1; display:flex; flex-direction:column }
    .center{ display:flex; align-items:center; justify-content:center }

    textarea{
      width:100%; height:400px; padding:15px; font-size:16px; resize:none;
      border:1px solid #ccc; border-radius:8px; background:#fff;
    }

    button.transfer{
      padding:12px 20px; font-size:20px; background:#0073e6; color:#fff;
      border:none; border-radius:8px; cursor:pointer; transition:filter .15s ease;
    }
    button.transfer:hover{ filter:brightness(.92) }

    label strong{margin-bottom:6px}

    /* ======== Aviso/toast ======== */
    #toast{ position:fixed; right:16px; bottom:16px; background:rgba(0,0,0,.82); color:#fff; padding:8px 12px; border-radius:6px; display:none; z-index:1400; font-size:13px }

    @media (max-width: 760px){
      .content{ flex-direction:column }
      .center{ order:2 }
    }

    @media print{
      header, .overlay, .drawer { display:none !important }
      textarea{ height:auto }
    }
  </style>
</head>
<body>

  <!-- HEADER estilo mac (com os √≠cones pedidos) -->
  <header>
    <div class="menu-left">
      <!-- tr√™s barrinhas (abre/fecha a barra lateral) -->
      <button class="icon-btn" id="btn-hamburger" title="Menu lateral">‚ò∞</button>
      <!-- fechar p√°gina -->
      <button class="icon-btn" id="btn-fechar" title="Fechar">‚ùå</button>
      <!-- menu/in√≠cio (voc√™ liga para a URL do seu site) -->
      <button class="icon-btn" id="btn-home" title="Menu inicial">üè†</button>
    </div>

    <div class="title-wrap">
      <h1>Lista Ordenada</h1>
      <small>Reordena n√∫meros e ordena alfabeticamente</small>
    </div>

    <div class="menu-right">
      <!-- salvar (dropdown) -->
      <div class="dropdown">
        <button class="icon-btn" id="btn-salvar" title="Salvar">üíæ</button>
        <div class="dropdown-menu" id="menu-salvar" role="menu" aria-hidden="true">
          <a href="#" data-act="txt">Salvar como TXT</a>
          <a href="#" data-act="pdf">Salvar como PDF</a>
          <a href="#" data-act="xlsx">Salvar como Excel</a>
        </div>
      </div>
      <!-- imprimir -->
      <button class="icon-btn" id="btn-print" title="Imprimir">üñ®Ô∏è</button>
      <!-- copiar -->
      <button class="icon-btn" id="btn-copy" title="Copiar">üìã</button>
    </div>
  </header>

  <!-- DRAWER lateral + overlay -->
  <div class="overlay" id="overlay"></div>
  <aside class="drawer" id="drawer">
    <header><h2>Navega√ß√£o</h2></header>

    <div class="section">
      <div class="section-header" data-section>
        <span>MACS</span>
        <span class="chev">‚ñ∏</span>
      </div>
      <div class="submenu">
        <!-- coloque as p√°ginas reais do seu site nas href abaixo -->
        <a href="mac-77.html">MAC Bairro S√£o Geraldo - C√≥d. 77</a>
        <a href="mac-78.html">MAC Bairro Planalto - C√≥d. 78</a>
        <a href="mac-79.html">MAC Romeu Duarte - C√≥d. 79</a>
        <a href="mac-80.html">MAC Rua S√£o Geraldo / Centro 2 - C√≥d. 80</a>
        <a href="mac-277.html">MAC Matriz - C√≥d. 277</a>
        <a href="mac-853.html">MAC Concesso - C√≥d. 853</a>
        <a href="mac-1249.html">MAC Jardim do Lago - C√≥d. 1249</a>
        <a href="mac-989.html">MAC Ara√∫jos - C√≥d. 989</a>
      </div>
    </div>

    <div class="section">
      <div class="section-header" data-section>
        <span>S√£o Jos√©</span>
        <span class="chev">‚ñ∏</span>
      </div>
      <div class="submenu">
        <a href="sao-jose.html">S√£o Jos√©</a>
        <a href="pao-total.html">P√£o Total</a>
      </div>
    </div>
  </aside>

  <!-- CONTE√öDO original da Lista Ordenada (sem telas extras) -->
  <div class="container">
    <div class="content">
      <div class="col">
        <label for="entrada"><strong>Texto de Entrada</strong></label>
        <textarea id="entrada" placeholder="Ex:\n2 pacotes de leite\n1 pct de caf√©\n8 queijo"></textarea>
      </div>

      <div class="center">
        <button class="transfer" id="btn-transfer">‚Üí</button>
      </div>

      <div class="col">
        <label for="saida"><strong>Resultado Ordenado (<span id="linhaQtd">0</span> linhas)</strong></label>
        <textarea id="saida" readonly></textarea>
      </div>
    </div>
  </div>

  <!-- Toast/Aviso -->
  <div id="toast">Copiado!</div>

  <script>
    /* ===== utilidades de toast ===== */
    function showToast(msg='Copiado!', ms=1800){
      const t = document.getElementById('toast');
      t.textContent = msg; t.style.display='block';
      clearTimeout(t._h); t._h = setTimeout(()=> t.style.display='none', ms);
    }

    /* ===== L√≥gica Lista Ordenada (c√≥digo original preservado) ===== */
    function removerAcentos(str){ return str.normalize('NFD').replace(/[ÃÄ-ÕØ]/g,''); }
    function processar(){
      const texto = document.getElementById('entrada').value.trim();
      if(!texto){ document.getElementById('saida').value=''; document.getElementById('linhaQtd').textContent='0'; return; }
      const linhas = texto.split('\n').map(l=>l.trim()).filter(l=>l.length>0);
      const removiveis=['pct','pcts','pacote','pacotes','pacote de','pct de','pcts de'];
      const processadas = linhas.map(linhaOriginal=>{
        let linha = linhaOriginal.toLowerCase().trim();
        linha = linha.replace(/\bkibe\b/g,'quibe');
        removiveis.forEach(p=>{ const r=new RegExp('\\b'+p+'\\b','gi'); linha = linha.replace(r,'').replace(/\s{2,}/g,' ').trim(); });
        const partes = linha.split(' '); const primeiro = partes[0]; const resto = partes.slice(1).join(' ');
        if(!isNaN(primeiro)) return `${resto} ${primeiro}`.trim();
        return linha;
      });
      const ordenadas = processadas.sort((a,b)=> removerAcentos(a).localeCompare(removerAcentos(b)) );
      document.getElementById('saida').value = ordenadas.join('\n');
      document.getElementById('linhaQtd').textContent = ordenadas.length;
    }

    // Bot√£o central (seta simples, sem degrad√™)
    document.getElementById('btn-transfer').addEventListener('click', processar);

    /* ===== Header: copiar / salvar / imprimir ===== */
    // Copiar conte√∫do do resultado
    document.getElementById('btn-copy').addEventListener('click', ()=>{
      const txt = document.getElementById('saida').value.trim();
      if(!txt){ showToast('Nada para copiar'); return; }
      navigator.clipboard.writeText(txt).then(()=> showToast('Copiado!')).catch(()=>{
        const ta=document.createElement('textarea'); ta.value=txt; ta.style.position='fixed'; ta.style.left='-9999px';
        document.body.appendChild(ta); ta.select(); try{ document.execCommand('copy'); showToast('Copiado!'); }catch(e){ showToast('Falha ao copiar'); }
        ta.remove();
      });
    });

    // Dropdown Salvar (abre/fecha)
    const salvarBtn = document.getElementById('btn-salvar');
    const salvarMenu = document.getElementById('menu-salvar');
    salvarBtn.addEventListener('click', (e)=>{
      e.stopPropagation();
      const isOpen = salvarMenu.style.display==='block';
      document.querySelectorAll('.dropdown-menu').forEach(m=> m.style.display='none');
      salvarMenu.style.display = isOpen ? 'none' : 'block';
      salvarMenu.setAttribute('aria-hidden', isOpen ? 'true':'false');
    });
    document.addEventListener('click', ()=> salvarMenu.style.display='none');

    // A√ß√µes salvar
    salvarMenu.addEventListener('click', (e)=>{
      if(e.target.tagName!=='A') return; e.preventDefault();
      const act = e.target.getAttribute('data-act');
      if(act==='txt') salvarComoTXT();
      if(act==='pdf') salvarComoPDF();
      if(act==='xlsx') salvarComoExcel();
      salvarMenu.style.display='none';
    });

    function salvarComoTXT(){
      const out = document.getElementById('saida').value.trim();
      if(!out){ showToast('Nenhum conte√∫do para salvar'); return; }
      const blob = new Blob([out], {type:'text/plain'});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='lista_ordenada.txt';
      document.body.appendChild(a); a.click(); a.remove();
      showToast('TXT salvo');
    }

    function salvarComoPDF(){
      const out = document.getElementById('saida').value.trim();
      if(!out){ showToast('Nenhum conte√∫do para salvar em PDF'); return; }
      const { jsPDF } = window.jspdf; const doc = new jsPDF({ unit:'pt', format:'a4' });
      doc.setFont('courier','normal'); doc.setFontSize(11);
      const margin=40; const maxWidth = doc.internal.pageSize.getWidth() - margin*2;
      let y=40; doc.text('Lista Ordenada', margin, y); y+=18;
      const linhas = out.split('\n');
      linhas.forEach(l=>{
        const wrapped = doc.splitTextToSize(l, maxWidth);
        wrapped.forEach((w)=>{ doc.text(w, margin, y); y+=14; if(y>doc.internal.pageSize.getHeight()-60){ doc.addPage(); doc.setFontSize(11); y=40; } });
      });
      doc.save('lista_ordenada.pdf');
      showToast('PDF salvo');
    }

    function salvarComoExcel(){
      const out = document.getElementById('saida').value.trim();
      if(!out){ showToast('Nenhum conte√∫do para exportar'); return; }
      const linhas = out.split('\n').map(l=>[l]);
      const wb = XLSX.utils.book_new(); const ws = XLSX.utils.aoa_to_sheet([["Itens Ordenados"], ...linhas]);
      XLSX.utils.book_append_sheet(wb, ws, 'Lista');
      XLSX.writeFile(wb, 'lista_ordenada.xlsx');
      showToast('Excel salvo');
    }

    // Imprimir (gera PDF e abre em nova aba, como no mac)
    document.getElementById('btn-print').addEventListener('click', ()=>{
      const out = document.getElementById('saida').value.trim();
      if(!out){ showToast('Nenhum conte√∫do para imprimir'); return; }
      const { jsPDF } = window.jspdf; const doc = new jsPDF({ unit:'pt', format:'a4' });
      doc.setFont('courier','normal'); doc.setFontSize(11);
      const margin=40; const maxWidth = doc.internal.pageSize.getWidth() - margin*2; let y=40;
      doc.text('Lista Ordenada', margin, y); y+=18;
      out.split('\n').forEach(l=>{
        const wrapped = doc.splitTextToSize(l, maxWidth);
        wrapped.forEach((w)=>{ doc.text(w, margin, y); y+=14; if(y>doc.internal.pageSize.getHeight()-60){ doc.addPage(); doc.setFontSize(11); y=40; } });
      });
      try{
        const win = window.open('', '_blank');
        if(!win){ doc.save('lista_ordenada.pdf'); showToast('PDF baixado'); return; }
        const blob = doc.output('blob'); const url = URL.createObjectURL(blob);
        win.location.href = url; setTimeout(()=> URL.revokeObjectURL(url), 60000);
      }catch(e){ doc.save('lista_ordenada.pdf'); showToast('PDF baixado'); }
    });

    /* ===== Drawer lateral ===== */
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('overlay');
    const btnHamb = document.getElementById('btn-hamburger');

    function openDrawer(){ drawer.classList.add('open'); overlay.classList.add('show'); }
    function closeDrawer(){ drawer.classList.remove('open'); overlay.classList.remove('show'); }

    btnHamb.addEventListener('click', (e)=>{ e.stopPropagation(); drawer.classList.contains('open')? closeDrawer(): openDrawer(); });
    overlay.addEventListener('click', closeDrawer);
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer(); });

    // Submenus MACS / S√£o Jos√© (abre/fecha)
    document.querySelectorAll('.section-header[data-section]').forEach(h=>{
      h.addEventListener('click', ()=>{
        const submenu = h.nextElementSibling; const chev = h.querySelector('.chev');
        const isOpen = submenu.style.display==='block';
        submenu.style.display = isOpen ? 'none' : 'block'; chev.textContent = isOpen ? '‚ñ∏' : '‚ñæ';
      });
    });

    // Ao clicar em qualquer link dentro do drawer, fecha o drawer e deixa o redirecionamento acontecer
    drawer.addEventListener('click', (e)=>{
      const a = e.target.closest('a'); if(!a) return;
      closeDrawer(); // o navegador segue o href normalmente
    });

    /* ===== √çcones fechar e home ===== */
    document.getElementById('btn-fechar').addEventListener('click', ()=>{ try{ window.close(); }catch(e){} });
    document.getElementById('btn-home').addEventListener('click', ()=>{ /* troque pela sua URL */ window.location.href = 'index.html'; });
  </script>
</body>
</html>
